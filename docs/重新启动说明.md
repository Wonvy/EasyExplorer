# 🔧 需要重新启动应用

## 问题原因

`window.__TAURI__` API 未正确加载，这是因为 Tauri 配置问题。

## ✅ 已修复

我已经做了以下修改：

1. ✅ 创建了本地开发服务器 (`serve.js`)
2. ✅ 更新了 `package.json` 脚本
3. ✅ 修复了 `src-tauri/tauri.conf.json` 配置
4. ✅ 添加了 `concurrently` 依赖用于同时运行服务器和 Tauri

---

## 🚀 重新启动步骤

### 1. 停止当前运行的应用

在运行 `npm run dev` 的终端窗口中：

```bash
# 按 Ctrl + C 停止
Ctrl + C
```

关闭所有 EasyExplorer 窗口。

### 2. 安装新依赖

```bash
npm install
```

### 3. 重新启动

```bash
npm run dev
```

---

## 📝 新的启动流程

现在 `npm run dev` 会：

1. ✅ 启动本地开发服务器（端口 8080）
2. ✅ 启动 Tauri 应用
3. ✅ 确保 Tauri API 正确注入

---

## 🎯 预期结果

启动后应该看到：

```
✅ 开发服务器运行在 http://localhost:8080/
...
Finished `dev` profile [unoptimized + debuginfo] target(s)
```

然后应用窗口会自动打开，并且：
- ✅ 不再显示错误页面
- ✅ 显示正常的文件管理器界面
- ✅ 左侧边栏显示磁盘驱动器
- ✅ 可以正常浏览文件

---

## 🔍 验证是否成功

按 `F12` 打开开发者工具，在 Console 中应该看到：

```
✅ Tauri API 已加载
🚀 EasyExplorer Tauri 版本启动中...
✅ EasyExplorer Tauri 版本已启动完成
```

---

## ⚠️ 如果还是出现错误

### 完全清理重启

```bash
# 1. 停止所有进程
Ctrl + C

# 2. 删除构建缓存
Remove-Item -Path "src-tauri\target" -Recurse -Force -ErrorAction SilentlyContinue

# 3. 重新安装依赖
npm install

# 4. 重新启动
npm run dev
```

---

## 💡 技术说明

**为什么需要开发服务器？**

- Tauri 需要通过 HTTP 服务器加载前端文件
- 这样可以确保 `window.__TAURI__` API 正确注入
- 直接加载文件系统的文件会导致 API 不可用

---

现在请按照上述步骤重新启动应用！🚀

