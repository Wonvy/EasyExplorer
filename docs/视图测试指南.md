# 视图测试指南

## 启动应用

```bash
npm run dev
```

等待应用启动后,你会看到文件浏览器界面。

## 测试步骤

### 1. 准备测试环境

1. **选择一个包含多种文件类型的文件夹**
   - 确保文件夹中包含:
     - 文件夹
     - 图片文件 (.jpg, .png, .gif)
     - 视频文件 (.mp4, .avi)
     - 音频文件 (.mp3, .wav)
     - 文档文件 (.txt, .md, .pdf)
     - 代码文件 (.js, .py, .html)
     - 压缩包 (.zip, .rar)
   - 如果没有合适的文件夹,可以导航到系统文件夹如 `C:\Windows\System32` 或下载目录

### 2. 图标视图测试

1. **切换到图标视图**
   - 点击工具栏中的图标视图按钮 (四个方块图标)
   - 或者按快捷键切换

2. **验证显示效果**
   - ✅ 文件以网格形式排列
   - ✅ 每个文件显示大图标和文件名
   - ✅ 文件名最多显示两行,超出部分显示省略号
   - ✅ 图标大小和间距合适
   - ✅ 可以正常双击打开文件/文件夹
   - ✅ 可以正常右键点击显示菜单

### 3. 列表视图测试

1. **切换到列表视图**
   - 点击工具栏中的列表视图按钮 (列表图标)

2. **验证显示效果**
   - ✅ 文件以表格形式排列
   - ✅ 显示文件图标、名称、大小、修改日期、类型
   - ✅ 列对齐整齐
   - ✅ 文件名列宽度合适
   - ✅ 大小列右对齐显示
   - ✅ 日期列右对齐显示
   - ✅ 可以正常双击打开文件/文件夹
   - ✅ 可以正常右键点击显示菜单

3. **测试列表内容**
   - 检查文件大小是否正确显示(KB, MB, GB)
   - 检查日期格式是否正确(年/月/日 时:分)
   - 检查文件类型是否正确识别

### 4. 分组视图测试

1. **切换到分组视图**
   - 点击工具栏中的分组视图按钮 (分组图标)

2. **验证分组结构**
   - ✅ 文件按类型分组显示
   - ✅ 分组标题清晰可见:
     - 文件夹
     - 图片
     - 视频
     - 音频
     - 文档
     - 压缩包
     - 代码
     - 其他
   - ✅ 每个分组显示文件数量,如 "图片 (15)"
   - ✅ 空分组不显示

3. **验证分组布局**
   - ✅ 分组以网格形式排列
   - ✅ 每个分组有边框和圆角
   - ✅ 分组标题有浅色背景
   - ✅ 鼠标悬停在标题上有高亮效果
   - ✅ 分组间距合适

4. **验证分组内容**
   - ✅ 每个分组内的文件垂直排列
   - ✅ 文件项显示图标和文件名
   - ✅ 如果文件很多,分组内容可以滚动
   - ✅ 滚动条样式美观(细滚动条)
   - ✅ 可以正常双击打开文件/文件夹
   - ✅ 可以正常右键点击显示菜单

5. **测试响应式布局**
   - 调整窗口宽度
   - 验证分组数量自动调整(窗口宽时显示更多列)
   - 验证在窄窗口下分组仍然可读

### 5. 时间轴视图测试

1. **切换到时间轴视图**
   - 点击工具栏中的时间轴视图按钮 (流式图标)

2. **验证时间分组**
   - ✅ 文件按时间分组显示
   - ✅ 分组标题格式为 "年份年 月份",如 "2024年 十一月"
   - ✅ 分组按时间倒序排列(最新的在上面)
   - ✅ 每个分组显示文件数量

3. **验证时间轴布局**
   - ✅ 时间分组垂直排列
   - ✅ 每个分组有边框和圆角
   - ✅ 分组标题有浅色背景
   - ✅ 鼠标悬停在标题上有高亮效果

4. **验证时间轴内容**
   - ✅ 每个分组内的文件显示完整信息:
     - 文件图标
     - 文件名
     - 文件大小
     - 修改日期
   - ✅ 文件信息排列整齐
   - ✅ 如果文件很多,分组内容可以滚动
   - ✅ 最大高度限制合理(400px)
   - ✅ 可以正常双击打开文件/文件夹
   - ✅ 可以正常右键点击显示菜单

5. **测试时间分组准确性**
   - 导航到不同的文件夹
   - 验证文件是否按照实际修改时间分组
   - 检查跨年的文件夹,验证年份分组是否正确

### 6. 视图切换测试

1. **快速切换视图**
   - 在不同视图间快速切换
   - 验证切换是否流畅
   - 验证文件选择状态是否保持

2. **验证视图记忆**
   - 切换到某个视图(如分组视图)
   - 导航到其他文件夹
   - 验证视图设置是否保持
   - 关闭应用后重新打开
   - 验证上次的视图设置是否被记住

### 7. 右键菜单位置测试

在每个视图中测试右键菜单:

1. **正常位置**
   - 在文件列表中间右键点击文件
   - ✅ 菜单出现在鼠标位置

2. **右边界测试**
   - 调整窗口,使其变窄
   - 在窗口右边缘的文件上右键点击
   - ✅ 菜单向左偏移,不会超出屏幕右边

3. **底部边界测试**
   - 滚动到文件列表底部
   - 在最后几个文件上右键点击
   - ✅ 菜单向上偏移,不会超出屏幕底部

4. **右下角测试**
   - 在右下角的文件上右键点击
   - ✅ 菜单同时向左和向上偏移
   - ✅ 菜单完全可见

5. **空白区域测试**
   - 在文件列表的空白区域右键点击
   - ✅ 显示空白区域菜单(新建文件夹、粘贴、刷新等)
   - ✅ 菜单位置正确

6. **小窗口测试**
   - 将窗口缩小到最小尺寸
   - 在各个位置右键点击
   - ✅ 菜单始终保持在屏幕内
   - ✅ 菜单与屏幕边缘至少有 10px 间距

### 8. 性能测试

1. **大量文件测试**
   - 导航到包含大量文件的文件夹(如 System32)
   - 切换不同视图
   - 验证:
     - ✅ 渲染速度是否可接受
     - ✅ 视图切换是否流畅
     - ✅ 滚动是否流畅

2. **分组性能测试**
   - 在包含大量文件的文件夹中切换到分组视图
   - 验证:
     - ✅ 分组计算是否快速
     - ✅ 大分组的滚动是否流畅

## 常见问题排查

### 问题1: 视图切换后文件不显示

**检查步骤:**
1. 打开浏览器开发者工具(F12)
2. 查看 Console 是否有错误
3. 检查 Elements 面板中 `#file-list` 的内容
4. 验证 `#file-list-container` 的 class 是否正确

**可能原因:**
- CSS 文件未正确加载
- SCSS 未正确编译
- JavaScript 代码有错误

**解决方法:**
```bash
# 重新编译 SCSS
npm run sass:build

# 重启开发服务器
npm run dev
```

### 问题2: 分组视图/时间轴视图没有分组

**检查步骤:**
1. 打开浏览器开发者工具
2. 查看 Console 是否有错误
3. 在 Console 中输入 `currentView` 查看当前视图
4. 检查文件是否有 `created` 或 `modified` 属性

**可能原因:**
- 文件时间戳缺失
- 分组函数逻辑错误

### 问题3: 右键菜单位置还是不对

**检查步骤:**
1. 打开浏览器开发者工具
2. 在 `showContextMenu` 函数中添加 `console.log` 输出坐标
3. 检查菜单的 `left` 和 `top` 样式值
4. 验证窗口的 `innerWidth` 和 `innerHeight`

**调试代码:**
```javascript
console.log('Mouse position:', x, y);
console.log('Menu rect:', rect);
console.log('Window size:', window.innerWidth, window.innerHeight);
```

### 问题4: 列表视图列对齐不整齐

**检查步骤:**
1. 打开浏览器开发者工具
2. 检查 `.file-list-list` 的 CSS 样式
3. 验证 `display: table` 是否生效
4. 检查子元素的 `display: table-cell` 是否生效

**可能原因:**
- CSS 样式被覆盖
- 元素结构不正确

## 预期结果总结

测试完成后,应该观察到:

### 视图功能
- ✅ 四种视图(图标、列表、分组、时间轴)都能正常切换
- ✅ 每种视图的布局和样式符合预期
- ✅ 视图设置能够持久化保存
- ✅ 在所有视图中文件操作功能正常

### 右键菜单
- ✅ 右键菜单能在所有视图中正常显示
- ✅ 菜单位置智能调整,不会超出屏幕
- ✅ 在边界位置菜单方向自动调整
- ✅ 菜单功能全部正常工作

### 用户体验
- ✅ 界面美观,布局合理
- ✅ 操作流畅,响应及时
- ✅ 视觉反馈清晰(hover 效果、选中状态等)
- ✅ 适配不同窗口尺寸

## 反馈

如果发现任何问题,请记录:
1. 问题描述
2. 复现步骤
3. 当前视图类型
4. 浏览器控制台错误信息
5. 屏幕截图或视频



