# 右键菜单测试指南

## 启动应用

```bash
npm run dev
```

## 测试步骤

### 1. 文件右键菜单测试

1. **打开文件列表**
   - 导航到任意文件夹
   - 确保文件列表中有文件和文件夹

2. **右键点击文件**
   - 右键点击任意文件
   - 应该看到右键菜单弹出,包含以下选项:
     - 打开
     - 在资源管理器中打开
     - 添加到收藏夹/取消收藏
     - 复制 (Ctrl+C)
     - 剪切 (Ctrl+X)
     - 删除 (Del)
     - 重命名

3. **测试菜单项**
   - **打开**: 点击后应该使用默认程序打开文件
   - **在资源管理器中打开**: 应该打开 Windows 资源管理器并选中该文件
   - **添加到收藏夹**: 应该将文件添加到侧边栏的收藏列表
   - **复制**: 应该将文件路径复制到剪贴板
   - **剪切**: 应该将文件标记为剪切状态
   - **删除**: 应该弹出确认对话框,确认后删除文件
   - **重命名**: 应该弹出输入框,输入新名称后重命名文件

4. **右键点击文件夹**
   - 右键点击任意文件夹
   - 菜单应该显示相同的选项
   - 测试各项功能是否正常

### 2. 空白区域右键菜单测试

1. **在文件列表空白处右键点击**
   - 点击文件列表中没有文件的空白区域
   - 应该看到右键菜单弹出,包含以下选项:
     - 新建文件夹
     - 粘贴 (Ctrl+V)
     - 添加到收藏夹/取消收藏
     - 刷新 (F5)

2. **测试菜单项**
   - **新建文件夹**: 应该弹出输入框,输入名称后创建新文件夹
   - **粘贴**: 如果剪贴板中有文件,应该粘贴到当前目录
   - **添加到收藏夹**: 应该将当前目录添加到收藏列表
   - **刷新**: 应该重新加载当前目录

### 3. 菜单交互测试

1. **点击菜单外部**
   - 右键打开菜单
   - 点击菜单外的任意位置
   - 菜单应该自动关闭

2. **执行菜单操作**
   - 右键打开菜单
   - 点击任意菜单项
   - 执行操作后菜单应该自动关闭

3. **禁用状态**
   - 在空白区域右键打开菜单
   - 如果剪贴板中没有文件,"粘贴"选项应该显示为灰色且不可点击

### 4. 边界情况测试

1. **屏幕边缘**
   - 在屏幕右边缘的文件上右键点击
   - 菜单应该自动向左调整,不会超出屏幕
   
2. **屏幕底部**
   - 滚动到文件列表底部
   - 在最后一个文件上右键点击
   - 菜单应该自动向上调整,不会超出屏幕

### 5. 主题测试

1. **亮色主题**
   - 确保应用处于亮色主题
   - 右键打开菜单
   - 检查菜单背景、文字、边框颜色是否正常
   - 鼠标悬停在菜单项上,检查高亮效果

2. **暗色主题**
   - 切换到暗色主题
   - 右键打开菜单
   - 检查菜单在暗色主题下的显示效果
   - 确保文字清晰可读,对比度合适

### 6. 快捷键提示测试

1. **查看快捷键**
   - 右键打开菜单
   - 检查以下菜单项是否显示快捷键提示:
     - 复制 (Ctrl+C)
     - 剪切 (Ctrl+X)
     - 粘贴 (Ctrl+V)
     - 删除 (Del)
     - 刷新 (F5)

2. **快捷键功能**
   - 选中文件后按 Ctrl+C,验证复制功能
   - 选中文件后按 Ctrl+X,验证剪切功能
   - 按 Ctrl+V,验证粘贴功能
   - 选中文件后按 Delete,验证删除功能
   - 按 F5,验证刷新功能

## 预期结果

- ✅ 右键菜单能够正常显示
- ✅ 所有菜单项功能正常
- ✅ 菜单能够自动关闭
- ✅ 菜单位置智能调整
- ✅ 主题切换后样式正常
- ✅ 快捷键提示显示正确
- ✅ 禁用状态显示正确

## 常见问题

### 问题1: 右键菜单不显示
- 检查浏览器控制台是否有错误
- 确认 `context-menu` 元素存在于 DOM 中
- 检查 CSS 是否正确加载

### 问题2: 菜单项点击无反应
- 检查浏览器控制台是否有错误
- 确认后端命令是否正确注册
- 检查事件监听器是否正确绑定

### 问题3: 菜单样式异常
- 确认 SCSS 已正确编译
- 检查 CSS 变量是否正确定义
- 确认主题切换功能正常

### 问题4: 菜单位置不对
- 检查 `clientX` 和 `clientY` 是否正确传递
- 确认位置调整逻辑是否执行

## 调试技巧

1. **使用浏览器开发者工具**
   - 按 F12 打开开发者工具
   - 查看 Console 面板是否有错误
   - 使用 Elements 面板检查菜单 DOM 结构
   - 使用 Network 面板检查资源加载

2. **添加调试日志**
   - 在 `showContextMenu` 函数开头添加 `console.log`
   - 检查函数是否被调用
   - 检查参数是否正确

3. **检查 CSS**
   - 在 Elements 面板中检查菜单元素的 styles
   - 确认 CSS 规则是否正确应用
   - 检查 z-index 是否足够高

## 反馈

如果发现任何问题,请记录:
1. 问题描述
2. 复现步骤
3. 浏览器控制台错误信息
4. 屏幕截图

